<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>环球美景明信片</title>
    <link rel="stylesheet" href="css/post.css">
    <script src="js/post.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">

    <script>
        let scale = 1; // 当前缩放比例
        let isDragging = false;
        let startX, startY, initialX, initialY;

        function getParameterByName(name) {
            const url = new URL(window.location.href);
            return url.searchParams.get(name);
        }

        function getCountryName(flagImg) {
            const filename = flagImg.split('/').pop();
            const countryName = filename.split('.')[0];
            return countryName.charAt(0).toUpperCase() + countryName.slice(1);
        }

        function addReadButtons() {
            const descrCn = document.getElementById('descr-cn');
            const englishParagraphs = descrCn.getElementsByClassName('word-en');
            Array.from(englishParagraphs).forEach(paragraph => {
                const text = paragraph.innerText;
                const button = document.createElement('button');
                button.innerText = '🔈';

                button.onclick = () => {
                    button.innerText = '👄'; // 改变按钮文本
                    responsiveVoice.speak(text, "UK English Male", {
                        onend: () => button.innerText = '🔈' // 播放结束后恢复文本
                    });
                };
                paragraph.appendChild(button);
            });
        }

        function setNavigationLinks() {
            const p = parseInt(getParameterByName('p'));
            const totalPages = 100;
            const previous = (p === 1) ? totalPages : p - 1;
            const next = (p === totalPages) ? 1 : p + 1;

            const previousLink = document.getElementById('previous-link');
            const nextLink = document.getElementById('next-link');

            previousLink.href = `p.html?p=${previous}`;
            nextLink.href = `p.html?p=${next}`;

            previousLink.onclick = function() {
                this.classList.add('fly-left');
                setTimeout(() => {
                    window.location.href = this.href; // 等待动画结束后跳转
                }, 500); // 与动画时长相同
            };

            nextLink.onclick = function() {
                this.classList.add('fly-right');
                setTimeout(() => {
                    window.location.href = this.href; // 等待动画结束后跳转
                }, 500); // 与动画时长相同
            };
        }

        function showImageModal() {
            const modal = document.getElementById('image-modal');
            const modalImg = document.getElementById('modal-image');
            const imageSrc = document.getElementById('image').src;
            modalImg.src = imageSrc; // 设置弹窗中的图片
            modal.style.display = 'flex'; // 显示弹窗
            scale = 1; // 重置缩放比例
            modalImg.style.transform = `scale(${scale}) translate(0, 0)`; // 应用缩放
            initialX = 0; initialY = 0; // 初始化位置
        }

        function closeModal() {
            const modal = document.getElementById('image-modal');
            modal.style.display = 'none'; // 隐藏弹窗
        }

        function showLandmarksModal() {
            const landmarksModal = document.getElementById('landmarks-modal');
            landmarksModal.style.display = 'flex'; // 显示景观弹窗
        }

        function closeLandmarksModal() {
            const landmarksModal = document.getElementById('landmarks-modal');
            landmarksModal.style.display = 'none'; // 隐藏景观弹窗
        }

        function handleTouchMove(event) {
            if (event.touches.length === 2) {
                const touch1 = event.touches[0];
                const touch2 = event.touches[1];
                const distance = Math.sqrt(Math.pow(touch2.clientX - touch1.clientX, 2) + Math.pow(touch2.clientY - touch1.clientY, 2));

                if (this.lastDistance) {
                    if (distance > this.lastDistance) {
                        scale *= 1.1; // 放大
                    } else {
                        scale *= 0.9; // 缩小
                    }
                    document.getElementById('modal-image').style.transform = `scale(${scale}) translate(${initialX}px, ${initialY}px)`;
                }
                this.lastDistance = distance;
            }
        }

        function handleTouchEnd() {
            this.lastDistance = null; // 重置距离
        }

        function startDrag(event) {
            isDragging = true;
            startX = event.clientX || event.touches[0].clientX;
            startY = event.clientY || event.touches[0].clientY;
        }

        function drag(event) {
            if (isDragging) {
                const modalImg = document.getElementById('modal-image');
                const x = (event.clientX || event.touches[0].clientX) - startX;
                const y = (event.clientY || event.touches[0].clientY) - startY;
                initialX += x;
                initialY += y;
                modalImg.style.transform = `scale(${scale}) translate(${initialX}px, ${initialY}px)`;
                startX = event.clientX || event.touches[0].clientX;
                startY = event.clientY || event.touches[0].clientY;
            }
        }

        function endDrag() {
            isDragging = false;
        }

        function updateClock() {
            const now = new Date();
            const formattedDate = `${now.getFullYear()}.${(now.getMonth() + 1).toString().padStart(2, '0')}.${now.getDate().toString().padStart(2, '0')} ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
            document.getElementById('clock').innerText = formattedDate;
        }

        window.onload = function() {
            const p = getParameterByName('p');
            if (data[p]) {
                document.getElementById('title-cn').innerText = data[p].title_cn;
                document.getElementById('title-en').innerText = data[p].title_en;
                document.getElementById('adress-cn').innerText = data[p].adress_cn;
                document.getElementById('adress-en').innerText = data[p].adress_en;
                document.getElementById('image').src = data[p].img;
                document.getElementById('country-flag').src = data[p].country_flag_img;
                document.getElementById('descr-cn').innerHTML = data[p].descr_cn;

                const countryName = getCountryName(data[p].country_flag_img);
                document.getElementById('country-name').innerText = countryName;

                // 添加朗读按钮
                addReadButtons();

                // 设置导航链接
                setNavigationLinks();

                // 添加点击图片事件
                document.getElementById('image').onclick = showImageModal;

                // 绑定触摸事件
                const modalImg = document.getElementById('modal-image');
                modalImg.addEventListener('touchmove', handleTouchMove);
                modalImg.addEventListener('touchend', handleTouchEnd);
                modalImg.addEventListener('mousedown', startDrag);
                modalImg.addEventListener('mousemove', drag);
                modalImg.addEventListener('mouseup', endDrag);
                modalImg.addEventListener('mouseleave', endDrag);
            }
            // 启动时钟更新
            setInterval(updateClock, 1000);
        };
    </script>
</head>
<body>
    <div class="container">
        <img id="image" alt="动态图片" src="img/loading.gif" />
        <div class="clock" id="clock"><span>2024.10.09 12:51:25</span></div> <!-- 时钟 -->
        <div class="nav-links">
            <a id="previous-link" href="#"><b>✈</b></a>
			<button onclick="showLandmarksModal()">⎈</button>
            <a id="next-link" href="#"><b>✈</b></a>
        </div>
        <div class="sec">
            <img id="country-flag" class="flag" alt="国旗" src="img/positioning.gif" />
            <div id="country-name" class="country"></div>
            <div class="sec_right">
                <div class="sec_cn">  
                    <h1 id="title-cn">景区名称加载中...</h1> 
                    <div class="address" id="adress-cn">景区位置加载中...</div>
                </div>
                <div class="sec_en"> 
                    <h1 id="title-en">Attraction name loading...</h1>
                    <div class="address" id="adress-en">Attractions are loading..</div>
                    <div class="clear"></div>
                </div>   
            </div>
        </div>
        
        <div class="description" id="descr-cn">景点介绍加载中...</div>
        <div class="description" id="descr-en">Attractions introduction loading...</div>
        
        <!-- 新增的按钮 -->
        

    </div>

    <!-- 弹窗结构 -->
    <div id="image-modal" class="modal">
        <div class="modal-content" onclick="closeModal()"> <!-- 点击弹窗内容区域关闭 -->
            <span class="close" onclick="closeModal()">&times;</span>
            <img id="modal-image" alt="放大图片" />
        </div>
    </div>

    <!-- 新增的景观弹窗 -->
    <div id="landmarks-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLandmarksModal()">&times;</span>
            
            <ul class="landmarks-list">
<li><h2>亚洲风景名胜</h2></li>
			
<li>中国<i>China</i></li>
<li><a href="p.html?p=55">布达拉宫<span>Potala Palace</span></a></li>
<li><a href="p.html?p=56">丽江古城<span>Lijiang Old Town</span></a></li>
<li><a href="p.html?p=57">长城<span>The Great Wall</span></a></li>
<li>越南<i>Vietnam</i></li>
<li><a href="p.html?p=81">下龙湾<span>Halong Bay</span></a></li>
<li>约旦<i>Jordan</i></li>
<li><a href="p.html?p=80">佩特拉古城<span>Petra</span></a></li>
<li>印度尼西亚<i>Indonesia</i></li>
<li><a href="p.html?p=19">布拉坦寺<span>Pura Ulun Danu Bratan</span></a></li>
<li><a href="p.html?p=36">巴厘岛<span>Bali</span></a></li>
<li>印度<i>India</i></li>
<li><a href="p.html?p=26">泰姬陵<span>Taj Mahal</span></a></li>
<li>以色列<i>Israel</i></li>
<li><a href="p.html?p=6">死海<span>Dead Sea</span></a></li>
<li><a href="p.html?p=7">耶路撒冷<span>Jerusalem</span></a></li>
<li>新加坡<i>Singapore</i></li>
<li><a href="p.html?p=68">滨海湾<span>Bayfront Ave</span></a></li>
<li>土耳其<i>Turkey</i></li>
<li><a href="p.html?p=20">博斯普鲁斯村庄<span>Bosphorus Villages</span></a></li>
<li><a href="p.html?p=21">圣索菲亚大教堂<span>Hagia Sophia</span></a></li>
<li><a href="p.html?p=96">蓝色清真寺<span>Blue Mosque</span></a></li>
<li><a href="p.html?p=97">希拉波利斯古剧场<span>Hierapolis Ancient Theatre</span></a></li>
<li><a href="p.html?p=98">棉花堡温泉池<span>Pamukkale Thermal Pools</span></a></li>
<li><a href="p.html?p=99">卡帕多西亚<span>Cappadocia</span></a></li>
<li>泰国<i>Thailand</i></li>
<li><a href="p.html?p=70">玉佛寺<span>Wat Phra Kaew</span></a></li>
<li><a href="p.html?p=71">洛哈萨马湾<span>Loh Samah Bay</span></a></li>
<li>日本<i>Japan</i></li>
<li><a href="p.html?p=16">富士山<span>Mount Fuji</span></a></li>
<li>尼泊尔<i>Nepal</i></li>
<li><a href="p.html?p=29">喜马拉雅山<span>Himalaya Mountain</span></a></li>
<li>马尔代夫<i>Maldives</i></li>
<li><a href="p.html?p=61">库拉玛蒂岛<span>Kuramathi</span></a></li>
<li>柬埔寨<i>Cambodia</i></li>
<li><a href="p.html?p=69">吴哥窟<span>Angkor Wat</span></a></li>
<li>韩国<i>South Korea</i></li>
<li><a href="p.html?p=72">龙头岩<span>Oedolgae Rock</span></a></li>
<li>菲律宾<i>Philippines</i></li>
<li><a href="p.html?p=30">埃尔尼多<span>El Nido Palawan</span></a></li>
<li>不丹<i>Bhutan</i></li>
<li><a href="p.html?p=15">虎穴寺<span>Taktsang Goemba</span></a></li>
<li>埃及<i>Egypt</i></li>
<li><a href="p.html?p=83">红海海岸<span>The Coast Shore of Red Sea</span></a></li>
<li>阿联酋<i>United Arab Emirates</i></li>
<li><a href="p.html?p=89">阿布扎比酋长国宫酒店<span>Emirates Palace</span></a></li>

<li><h2>欧洲风景名胜</h2></li>
<li>英国<i>United Kingdom</i></li>
<li><a href="p.html?p=22">伦敦桥<span>London Bridge</span></a></li>
<li><a href="p.html?p=23">伦敦眼<span>London Eye</span></a></li>
<li><a href="p.html?p=24">比奇角<span>Beachy Head</span></a></li>
<li>意大利<i>Italy</i></li>
<li><a href="p.html?p=12">水城威尼斯<span>The Water City of Venice</span></a></li>
<li><a href="p.html?p=28">多洛米蒂山<span>Dolomites</span></a></li>
<li><a href="p.html?p=37">罗马城市风光<span>Rome Cityscape</span></a></li>
<li><a href="p.html?p=38">瓦尔加迪纳<span>Val Gardena</span></a></li>
<li><a href="p.html?p=39">亚得里亚海<span>Adriatic Sea</span></a></li>
<li><a href="p.html?p=40">纳沃纳广场喷泉<span>Fountain in Piazza Navona</span></a></li>
<li><a href="p.html?p=41">罗马斗兽场<span>Colosseum</span></a></li>
<li>匈牙利<i>Hungary</i></li>
<li><a href="p.html?p=51">布达佩斯<span>Budapest</span></a></li>
<li><a href="p.html?p=52">塞切尼链桥<span>Szechenyi Chain Bridge</span></a></li>
<li>希腊<i>Greece</i></li>
<li><a href="p.html?p=44">圣托里尼<span>Santorini</span></a></li>
<li><a href="p.html?p=45">纳瓦吉奥海滩<span>Navagio Beach</span></a></li>
<li><a href="p.html?p=46">阿莫迪湾<span>Ammoudi Bay</span></a></li>
<li><a href="p.html?p=47">米克诺斯岛<span>Mykonos Island</span></a></li>
<li><a href="p.html?p=48">帕特农神庙<span>Parthenon</span></a></li>
<li>西班牙<i>Spain</i></li>
<li><a href="p.html?p=17">阿尔罕布拉宫<span>Alhambra</span></a></li>
<li><a href="p.html?p=65">高迪的古埃尔公园<span>Gaudi's Parc Guell</span></a></li>
<li>斯洛伐克<i>Slovakia</i></li>
<li><a href="p.html?p=31">塔特拉山国家公园<span>High Tatra National Park</span></a></li>
<li>瑞士<i>Switzerland</i></li>
<li><a href="p.html?p=10">因特拉肯<span>Interlaken</span></a></li>
<li><a href="p.html?p=11">瑞士阿尔卑斯山<span>The Alps in Switzerland</span></a></li>
<li>挪威<i>Norway</i></li>
<li><a href="p.html?p=4">罗弗敦群岛雷讷<span>Reine, Lofoten Islands</span></a></li>
<li><a href="p.html?p=5">极光下的渔村山景<span>Aurora borealis over mountains in fishing village</span></a></li>
<li>克罗地亚<i>Croatia</i></li>
<li><a href="p.html?p=13">萨格勒布大教堂<span>Cathedral of Zagreb</span></a></li>
<li><a href="p.html?p=14">普利特维采湖群国家公园<span>Plitvice Lakes National Park</span></a></li>
<li><a href="p.html?p=18">普拉竞技场<span>Arena Pula</span></a></li>
<li>黑山<i>Montenegro</i></li>
<li><a href="p.html?p=27">科托尔<span>Kotor</span></a></li>
<li><a href="p.html?p=100">圣斯特凡岛<span>Sveti Stefan</span></a></li>
<li>荷兰<i>Netherlands</i></li>
<li><a href="p.html?p=49">辛格运河<span>Canal Singel</span></a></li>
<li><a href="p.html?p=50">赞斯堡<span>Zaanse Schans</span></a></li>
<li>梵蒂冈<i>Vatican</i></li>
<li><a href="p.html?p=43">圣彼得大教堂<span>St. Peter's Basilica</span></a></li>
<li>法国<i>France</i></li>
<li><a href="p.html?p=32">卢浮宫博物馆<span>The Louvre Museum</span></a></li>
<li><a href="p.html?p=33">埃菲尔铁塔<span>Eiffel Tower</span></a></li>
<li><a href="p.html?p=34">普罗旺斯薰衣草田<span>Lavender Field in Provence</span></a></li>
<li><a href="p.html?p=35">圣米歇尔山<span>Mont-Saint-Michel</span></a></li>
<li>俄罗斯<i>Russia</i></li>
<li><a href="p.html?p=62">圣瓦西里升天大教堂<span>Saint Basil's Cathedral</span></a></li>
<li><a href="p.html?p=63">克里姆林宫<span>The Kremlin</span></a></li>
<li><a href="p.html?p=64">基督救世主大教堂<span>Cathedral of Christ the Saviour</span></a></li>
<li>丹麦<i>Denmark</i></li>
<li><a href="p.html?p=8">丹麦的格陵兰自然山<span>Greenland's natural mountains in Denmark</span></a></li>
<li><a href="p.html?p=9">新港<span>Nyhavn</span></a></li>
<li>波兰<i>Poland</i></li>
<li><a href="p.html?p=42">克里尼察-兹德鲁伊<span>Krynica-Zdroj City</span></a></li>
<li>冰岛<i>Iceland</i></li>
<li><a href="p.html?p=1">赫维勒尔温泉<span>Hveravellir</span></a></li>
<li><a href="p.html?p=2">塞里雅兰瀑布<span>Seljalandsfoss</span></a></li>
<li><a href="p.html?p=3">基尔丘山极光<span>Northern Light at Kirkjufell</span></a></li>
<li>奥地利<i>Austria</i></li>
<li><a href="p.html?p=53">莱拉赫峰<span>Lerachhorn</span></a></li>
<li><a href="p.html?p=54">哈尔施塔特<span>Hallstatt</span></a></li>
<li>爱尔兰<i>Ireland</i></li>
<li><a href="p.html?p=25">莫赫悬崖<span>Cliffs of Moher</span></a></li>


<li><h2>大洋洲风景名胜</h2></li>
<li>新西兰<i>New Zealand</i></li>
<li><a href="p.html?p=67">奥克兰<span>Auckland</span></a></li>
<li>法属波利尼西亚<i>French Polynesia</i></li>
<li><a href="p.html?p=88">法属波利尼西亚<span>French Polynesia</span></a></li>
<li>澳大利亚<i>Australia</i></li>
<li><a href="p.html?p=91">悉尼歌剧院<span>Sydney Opera House</span></a></li>
<li><a href="p.html?p=92">艾尔斯岩<span>Uluru</span></a></li>


<li><h2>非洲风景名胜</h2></li>
<li>南非<i>South Africa</i></li>
<li><a href="p.html?p=90">好望角<span>Cape of Good Hope</span></a></li>
<li>纳米比亚<i>Namibia</i></li>
<li><a href="p.html?p=95">纳米布沙漠<span>Namib Desert</span></a></li>
<li>肯尼亚<i>Kenya</i></li>
<li><a href="p.html?p=76">马赛马拉野生动物保护区<span>Maasai Mara National Reserve</span></a></li>
<li>津巴布韦<i>Zimbabwe</i></li>
<li><a href="p.html?p=86">维多利亚瀑布<span>Victoria Falls</span></a></li>
<li>埃及<i>Egypt</i></li>
<li><a href="p.html?p=82">卡纳克神庙<span>Karnak Temple</span></a></li>
<li><a href="p.html?p=84">阿斯旺尼罗河<span>Nile River in Aswan</span></a></li>
<li><a href="p.html?p=85">金字塔<span>The Pyramids</span></a></li>
<!-- Duplicate entry for Karnak Temple, assuming only one is needed -->

<li><h2>北美洲风景名胜</h2></li>
<li>墨西哥<i>Mexico</i></li>
<li><a href="p.html?p=93">奇琴伊察<span>Chichen Itza</span></a></li>
<li>美国<i>United States</i></li>
<li><a href="p.html?p=58">大峡谷国家公园<span>Grand Canyon National Park</span></a></li>
<li><a href="p.html?p=59">阿拉斯加北极光<span>Northern Lights in Alaska</span></a></li>
<li><a href="p.html?p=60">大棱镜温泉<span>The Grand Prismatic Spring</span></a></li>
<li>加拿大<i>Canada</i></li>
<li><a href="p.html?p=78">露易丝湖<span>Lake Louise</span></a></li>
<li><a href="p.html?p=79">尼亚加拉瀑布<span>Niagara Falls</span></a></li>
<li>巴巴多斯<i>Barbados</i></li>
<li><a href="p.html?p=74">巴瑟巴海滩<span>Bathsheba Beach</span></a></li>


<li><h2>南美洲风景名胜</h2></li>
<li>秘鲁<i>Peru</i></li>
<li><a href="p.html?p=94">马丘比丘遗迹<span>Inca Ruins</span></a></li>
<li>厄瓜多尔<i>Ecuador</i></li>
<li><a href="p.html?p=77">加拉帕戈斯群岛<span>Galapagos Islands</span></a></li>
<li>玻利维亚<i>Bolivia</i></li>
<li><a href="p.html?p=66">乌尤尼盐湖<span>Salar de Uyuni</span></a></li>
<li>巴西<i>Brazil</i></li>
<li><a href="p.html?p=73">伊瓜苏瀑布<span>Iguassu Falls</span></a></li>
<li><a href="p.html?p=75">里约热内卢<span>Rio de Janeiro</span></a></li>
            </ul>
        </div>
    </div>

    <div class="copyright">山海蝉月文化版权所有<br>
        <span>该系列所采用的摄影图片均为付费购买使用，该套明信片由山海蝉月指定店铺生产售卖，其余店铺未经允许，不得侵犯版权、擅自销售。</span>
    </div>
</body>
</html>

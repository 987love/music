<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>ä¸–ç•Œåèƒœå¤è¿¹</title>
    <link rel="stylesheet" href="css/post.css">
    <script src="js/post.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <script>
        function getParameterByName(name) {
            const url = new URL(window.location.href);
            return url.searchParams.get(name);
        }

        function getCountryName(flagImg) {
            const filename = flagImg.split('/').pop();
            const countryName = filename.split('.')[0];
            return countryName.charAt(0).toUpperCase() + countryName.slice(1);
        }

        function readText(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            window.speechSynthesis.speak(utterance);
        }

        function addReadButtons() {
            const descrCn = document.getElementById('descr-cn');
            const paragraphs = descrCn.getElementsByTagName('p');

            Array.from(paragraphs).forEach(paragraph => {
                const text = paragraph.innerText;
                const button = document.createElement('button');
                button.innerText = 'ğŸ”‰';
                button.onclick = () => readText(text);
                paragraph.appendChild(button); // å°†æŒ‰é’®æ·»åŠ åˆ°æ®µè½æœ«å°¾
            });
        }

        window.onload = function() {
            const p = getParameterByName('p');
            if (data[p]) {
                document.getElementById('title-cn').innerText = data[p].title_cn;
                document.getElementById('title-en').innerText = data[p].title_en;
                document.getElementById('adress-cn').innerText = data[p].adress_cn;
                document.getElementById('adress-en').innerText = data[p].adress_en;
                document.getElementById('image').src = data[p].img;
                document.getElementById('country-flag').src = data[p].country_flag_img;
                document.getElementById('descr-cn').innerHTML = data[p].descr_cn; // ä½¿ç”¨åŸå§‹æ•°æ®

                const countryName = getCountryName(data[p].country_flag_img);
                document.getElementById('country-name').innerText = countryName;

                // æ·»åŠ æœ—è¯»æŒ‰é’®
                addReadButtons();
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <img id="image" alt="åŠ¨æ€å›¾ç‰‡" src="img/loading.gif" />
        <div class="sec">
            <img id="country-flag" class="flag" alt="å›½æ——" src="img/positioning.gif" />
            <div id="country-name" class="country"></div>
            <div class="sec_right">
                <div class="sec_cn">  
                    <h1 id="title-cn">æ™¯åŒºåç§°åŠ è½½ä¸­...</h1> 
                    <div class="address" id="adress-cn">æ™¯åŒºä½ç½®åŠ è½½ä¸­...</div>
                </div>
                <div class="sec_en"> 
                    <h1 id="title-en">Attraction name loading...</h1>
                    <div class="address" id="adress-en">Attractions are loading..</div>
                    <div class="clear"></div>
                </div>   
            </div>
        </div>
        
        <div class="description" id="descr-cn">æ™¯ç‚¹ä»‹ç»åŠ è½½ä¸­...</div>
        <div class="description" id="descr-en">Attractions introduction loading...</div>
    </div>
    <div class="copyright">å±±æµ·è‰æœˆæ–‡åŒ–ç‰ˆæƒæ‰€æœ‰</div>
</body>
</html>
